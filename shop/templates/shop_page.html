
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Order form</title>
    <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="../static/shop_page.css">
</head>
<body>

<script>
    let cartData = {{cart|safe}};
    let inside = "{{ inside|safe }}";
</script>

{% include 'base.html' %}
<div class="form">
    <form action="" method="Post" id="searchForm">
        {% csrf_token %}
        <label for="number" style="font-size: 22px">Product number</label>
        <br>
        <input name="number" id="number" onkeyup="updateDropdown()" autocomplete="off">
        <br>
        <div id="dropdown"></div>
        <br>
        <button type="submit" class="search">Search</button>
    </form>
</div>

<div class="products">
    <div class="results">
        {% if documents %}

            {% if search_term %}
            <h2>Searched Results for "{{ search_term }}":</h2>
        {% else %}
            <h2>Searched Results:</h2>
        {% endif %}
    </div>

    <ul>
        {% for document in documents %}
            <div class="document-container" data-document="{{ document }}">
                <div class="number-in-cart" data-product-id="{{ document.name }}" style="{% if not inside %} display: none {% endif %}">{{ document.number }}</div>

                <div class="document-info" id="info-{{ document.name }}">

                    <div class="document-number"> {{ document.name }} </div> <br><br>
                    <div class="document-price" >â‚¬{{ document.price }}</div>
                    <div class="document-in-stock">In stock: {{ document.quantity }}</div> <br><br>
                    <div class="document-description">{{ document.description }}</div>     <br>

                    <div class="deleteBut"  data-product-id="{{ document.name }}"
                         style="{% if not inside %} display: none {% endif %}">
                        <i class="fa-solid fa-trash"></i>
                    </div>

                    <div>
                        <div class="quantity-input" id="quantity-input-{{ document.name }}">
                               <input class="inp" min=1 id="quantity-input-inp-{{ document.name }}" type="number" placeholder="Enter the quantity">
                        </div>
                        <div class="quantity-slider" id="quantity-slider-{{ document.name }}">
                            <span class="min">{{ 1 }}</span>
                            <input type="range" min="1" max="{{ document.quantity }}" value="{{ quantity }}" class="slider" id="slider-{{ document.name }}">
                            <span class="max">{{ document.quantity }}</span>
                        </div>
                        <button class="quantity-input-button" id="quantity-input-apply-{{ document.name }}">Confirm</button>
                    </div>

                    <br>
                    <br>
                    <span class="current-quantity" id="current-quantity-{{ document.name }}" >Current quantity: 0</span>
                    <span class="sum" id="sum-{{ document.name }}" style="{% if not inside %} display: none {% endif %}">{{ document.price }}</span>
                </div>
                <img class="document-image" src="{{ document.image_url }}" alt="{{ document.name }}">
            </div>
        {% endfor %}
    </ul>

</div>

{% else %}
    <div class="NoRes">
    <p>No results to display.</p>
    </div>
{% endif %}


<div class="item-container" id="cart-icon-container">
    <div class="cart-icon" id="cart-icon">
        <i class="fa fa-arrow-right" id="arrow-icon" aria-hidden="true"></i>
        <span id="show-cart">Show my cart</span>
    </div>
    <br>
    </div>
    <div id="mini-cart" class="cartPreview" style="display: none;">

    </div>

<script src="../static/js/shop_page.js"></script>
</body>
</html>
{%endblock%}