{% extends 'widgets/base.html' %}
{% load static %}
{% load widget_tweaks %}
{% load i18n %}
{% block content %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Checkout</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v6.4.0/js/all.js"></script>
  </head>
  <body>
  {% include 'widgets/navigation_bar.html' %}
  <section class="section" style="margin-top: 100px">
    <div class="container" style="display: flex; flex-direction: column; gap:30px; align-items: center; text-align: center">
      <h1>{% trans "Your payment succeeded!" %}</h1>
      <h4>{% trans "Within a few minutes you will receive a confirmation of payment via email." %}</h4>
      <div><a href="{% url "profile" feature_name='orders' %}" style="padding: 19px 32px;
            color: white !important;
            background-color: #003665;
            font-size: 14px;
            font-weight: 500;
            border-radius: 7px;
            cursor: pointer;
            border: none;
            margin-left: 5px; "> {% trans "My Orders" %} </a></div>
    </div>
  </section>
      <script>
      let orderTotal_final = parseFloat("{{ order_total|default:'0' }}");
      let currency_final = "{{ currency }}";
      let order_id_final = "{{ order_id }}";
      console.log(currency_final + " AND " + typeof(currency_final));
      console.log(orderTotal_final + " AND " + typeof(orderTotal_final));

      cbq('track', 'Purchase', {
          value: orderTotal_final,
          currency: currency_final,
          content_ids: [order_id_final]
      });
    </script>
  </body>
</html>
{% endblock %}